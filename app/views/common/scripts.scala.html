@import common._
@import helper._
@import play.api.Configuration
@import play.api.db.Database
@import play.api.Mode
@import eu.seitzal.opentab._
@import shortcuts._
@import models.Tab
@import auth._

@(config: Configuration, db : Option[Database], tab: Option[Tab] = None)(implicit request: RequestHeader)

<script src="@location(config)/api/routes.js"></script>

@if(config.get[Boolean]("debugFrontend") == true) {
  <script src="@routes.Assets.versioned("lib/vue/dist/vue.js")"></script>
  <script src="@routes.Assets.versioned("lib/vuetify/dist/vuetify.js")"></script>
  <script src="@routes.Assets.versioned("lib/axios/dist/axios.js")"></script>
} else {
  <script src="@routes.Assets.versioned("lib/vue/dist/vue.min.js")"></script>
  <script src="@routes.Assets.versioned("lib/vuetify/dist/vuetify.min.js")"></script>
  <script src="@routes.Assets.versioned("lib/axios/dist/axios.min.js")"></script>
}

@if(loggedIn) {
  <script>api_key = '@request.session.get("api_key").getOrElse("")';</script>
} else {
  <script>api_key = undefined;</script>
}

@if(tab.isDefined) {
  <script>tabid = parseInt('@tab.get.id');</script>
}

@if(tab.isDefined && loggedIn && userCanSetupTab(sessionUserId, tab.get.id)(db.get)) {
  <script>let canSetup = true;</script>
} else {
  <script>let canSetup = false;</script>
}

<script>app_location = '@location(config)';</script>

<script>
    $("input[type='number']").inputSpinner();
</script>